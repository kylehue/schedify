import{u as E,N as P,G as $,_ as G,I}from"./IqWDTP7p.js";import{d as D,aF as A,aG as B,b0 as U,o as f,at as q,w as s,b as a,u as e,au as T,e as c,aL as y,a as p,B as v,aI as z,aw as R,n as V,r as w,c as j,aJ as C,V as F,aK as L}from"./CCwICSxJ.js";import{u as M}from"./C_Ai-skY.js";import{b as H,N}from"./DNhtUW22.js";const J={class:"flex flex-col md:flex-row md:items-center gap-1"},K={class:"flex flex-wrap justify-between"},O={class:"flex flex-wrap gap-2"},Q=D({__name:"subject",props:{code:{}},setup(S){const l=S,r=E(),n=A(),m=B(),o=n.getSubject(l.code);if(!o)throw U({statusCode:404,statusMessage:`Subject does not exist: ${l.code}`});function u(){V({params:{subject:l.code},query:{s:m.query.s},name:"subjects-subject-sections"})}function g(){r.warning({title:"Remove subject",content:`Are you sure you want to remove ${l.code}?`,positiveText:"Remove",negativeText:"Cancel",onPositiveClick(_){n.removeSubject(l.code)}})}return(_,d)=>(f(),q(e(R),{class:z([{"opacity-50":!e(o).isEnabled},"transition-opacity"])},{header:s(()=>[a(e(T),{class:"truncate text-sm"},{default:s(()=>[c(y(l.code),1)]),_:1})]),default:s(()=>[p("div",J,[a(e(T),{class:"truncate",depth:3},{default:s(()=>[c(y(e(o).description||"Empty description"),1)]),_:1})])]),action:s(()=>[p("div",K,[p("div",O,[a(e(P),{dot:"",show:!e(n).isSubjectValid(e(o).code)},{default:s(()=>[a(e(v),{tertiary:"",onClick:u},{default:s(()=>d[1]||(d[1]=[c(" Edit sections... ")])),_:1})]),_:1},8,["show"]),a(e(v),{onClick:d[0]||(d[0]=k=>e(o).isEnabled=!e(o).isEnabled),tertiary:""},{default:s(()=>[c(y(e(o).isEnabled?"Disable":"Enable"),1)]),_:1})]),a(e(v),{onClick:g,type:"error",quaternary:"",circle:""},{icon:s(()=>[a(e($))]),_:1})])]),_:1},8,["class"]))}}),W={class:"w-full h-full flex flex-col items-start justify-start gap-10 p-10 overflow-y-scroll"},X={key:1,class:"flex flex-row flex-wrap"},Y={class:"flex flex-wrap w-full justify-between gap-2"},Z={class:"flex flex-wrap gap-2"},ee={class:"flex flex-col gap-2"},le=D({__name:"index",setup(S){M({title:"Subjects"});const l=E(),r=w(!1),n=w(""),m=w(void 0),o=w(""),u=A(),g=B();console.log(u);function _(){let x=n.value.trim(),t=o.value.trim()||void 0;const b=()=>{u.addSubject(x,t),n.value="",o.value="",r.value=!1,m.value=void 0};u.getSubject(x)?l.warning({title:"Duplicate subject",content:"This subject already exists! Do you want to replace it instead?",negativeText:"Cancel",positiveText:"Replace",onPositiveClick(h){b()}}):x.length?b():m.value="error"}function d(){l.warning({title:"Clear all",content:"Are you sure you want to clear all subjects?",positiveText:"Clear all",negativeText:"Cancel",onPositiveClick(x){u.clearSubjects()}})}function k(){V({name:"schedules",query:{s:g.query.s}})}return(x,t)=>{const b=Q,h=G;return f(),j("div",W,[a(e(R),{"content-class":"min-h-[300px]"},{header:s(()=>t[4]||(t[4]=[c(" Subjects ")])),default:s(()=>[e(u).subjects.size<=0?(f(),q(e(H),{key:0,class:"h-full w-full flex items-center justify-center"})):(f(),j("div",X,[(f(!0),j(F,null,L(e(u).subjects.values(),i=>(f(),j("div",{key:i.code,class:"w-1/3 max-md:w-full max-xl:w-1/2 p-2"},[a(b,{code:i.code},null,8,["code"])]))),128))]))]),action:s(()=>[p("div",Y,[p("div",Z,[a(e(v),{onClick:t[0]||(t[0]=i=>r.value=!0)},{icon:s(()=>[a(e(I))]),default:s(()=>[t[5]||(t[5]=c(" Add a subject "))]),_:1}),a(e(v),{onClick:k},{default:s(()=>t[6]||(t[6]=[c(" Go to schedules... ")])),_:1})]),a(e(v),{onClick:d,ghost:"",type:"error"},{icon:s(()=>[a(e($))]),default:s(()=>[t[7]||(t[7]=c(" Clear all "))]),_:1})])]),_:1}),a(h,{show:e(r),"onUpdate:show":t[3]||(t[3]=i=>C(r)?r.value=i:null),title:"Add a subject","positive-text":"Add","negative-text":"Nevermind",onPositiveClick:_},{default:s(()=>[p("div",ee,[a(e(N),{value:e(n),"onUpdate:value":t[1]||(t[1]=i=>C(n)?n.value=i:null),status:e(m),placeholder:"Code (must be unique)"},null,8,["value","status"]),a(e(N),{value:e(o),"onUpdate:value":t[2]||(t[2]=i=>C(o)?o.value=i:null),placeholder:"Description (optional)"},null,8,["value"])])]),_:1},8,["show"])])}}});export{le as default};
