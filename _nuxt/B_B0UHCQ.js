import{u as $,N as U,G as D,I as z}from"./loxyjC-x.js";import{d as A,a9 as B,a8 as q,aa as F,o as f,ab as R,w as s,e as t,b as e,a4 as N,f as r,a5 as w,a as p,B as v,ad as G,ac as I,n as P,u as L,r as _,c as j,ag as C,F as T,ai as M}from"./ZLWaAANC.js";import{_ as H,a as J,N as K,b as E}from"./DIpnb4No.js";import"./-s5Sn9Cb.js";const O={class:"flex flex-col md:flex-row md:items-center gap-1"},Q={class:"flex flex-wrap justify-between"},W={class:"flex flex-wrap gap-2"},X=A({__name:"subject",props:{code:{}},setup(S){const l=S,c=$(),n=B(),m=q(),o=n.getSubject(l.code);if(!o)throw F({statusCode:404,statusMessage:`Subject does not exist: ${l.code}`});function u(){P({params:{subject:l.code},query:{s:m.query.s},name:"subjects-subject-sections"})}function y(){c.warning({title:"Remove subject",content:`Are you sure you want to remove ${l.code}?`,positiveText:"Remove",negativeText:"Cancel",onPositiveClick(g){n.removeSubject(l.code)}})}return(g,d)=>(f(),R(e(I),{class:G([{"opacity-50":!e(o).isEnabled},"transition-opacity"])},{header:s(()=>[t(e(N),{class:"truncate text-sm"},{default:s(()=>[r(w(l.code),1)]),_:1})]),default:s(()=>[p("div",O,[t(e(N),{class:"truncate",depth:3},{default:s(()=>[r(w(e(o).description||"Empty description"),1)]),_:1})])]),action:s(()=>[p("div",Q,[p("div",W,[t(e(U),{dot:"",show:!e(n).isSubjectValid(e(o).code)},{default:s(()=>[t(e(v),{tertiary:"",onClick:u},{default:s(()=>d[1]||(d[1]=[r(" Edit sections... ")])),_:1})]),_:1},8,["show"]),t(e(v),{onClick:d[0]||(d[0]=k=>e(o).isEnabled=!e(o).isEnabled),tertiary:""},{default:s(()=>[r(w(e(o).isEnabled?"Disable":"Enable"),1)]),_:1})]),t(e(v),{onClick:y,type:"error",quaternary:"",circle:""},{icon:s(()=>[t(e(D))]),_:1})])]),_:1},8,["class"]))}}),Y={class:"flex flex-wrap w-full gap-2"},Z={class:"flex h-full justify-center"},ee={key:1,class:"container flex flex-row flex-wrap h-fit pb-8"},te={class:"flex flex-col gap-2"},ne=A({__name:"index",setup(S){L({title:"Subjects"});const l=$(),c=_(!1),n=_(""),m=_(void 0),o=_(""),u=B(),y=q();console.log(u);function g(){let x=n.value.trim(),a=o.value.trim()||void 0;const b=()=>{u.addSubject(x,a),n.value="",o.value="",c.value=!1,m.value=void 0};u.getSubject(x)?l.warning({title:"Duplicate subject",content:"This subject already exists! Do you want to replace it instead?",negativeText:"Cancel",positiveText:"Replace",onPositiveClick(h){b()}}):x.length?b():m.value="error"}function d(){l.warning({title:"Clear all",content:"Are you sure you want to clear all subjects?",positiveText:"Clear all",negativeText:"Cancel",onPositiveClick(x){u.clearSubjects()}})}function k(){P({name:"subjects-schedules",query:{s:y.query.s}})}return(x,a)=>{const b=X,h=H,V=J;return f(),j(T,null,[t(h,{name:"app",breadcrumbs:[],title:"Subjects"},{"header-extra":s(()=>[p("div",Y,[t(e(v),{class:"flex-1",onClick:a[0]||(a[0]=i=>c.value=!0)},{icon:s(()=>[t(e(z))]),default:s(()=>[a[4]||(a[4]=r(" Add a subject "))]),_:1}),t(e(v),{class:"flex-1",onClick:k},{default:s(()=>a[5]||(a[5]=[r(" Go to schedules... ")])),_:1}),t(e(v),{class:"flex-1",onClick:d,tertiary:"",type:"error"},{icon:s(()=>[t(e(D))]),default:s(()=>[a[6]||(a[6]=r(" Clear all "))]),_:1})])]),default:s(()=>[p("div",Z,[e(u).subjects.size<=0?(f(),R(e(K),{key:0,class:"h-full w-full flex items-center justify-center"})):(f(),j("div",ee,[(f(!0),j(T,null,M(e(u).subjects.values(),i=>(f(),j("div",{key:i.code,class:"w-1/3 max-md:w-full max-xl:w-1/2 p-2 h-fit"},[t(b,{code:i.code},null,8,["code"])]))),128))]))])]),_:1}),t(V,{show:e(c),"onUpdate:show":a[3]||(a[3]=i=>C(c)?c.value=i:null),title:"Add a subject","positive-text":"Add","negative-text":"Nevermind",onPositiveClick:g},{default:s(()=>[p("div",te,[t(e(E),{value:e(n),"onUpdate:value":a[1]||(a[1]=i=>C(n)?n.value=i:null),status:e(m),placeholder:"Code (must be unique)"},null,8,["value","status"]),t(e(E),{value:e(o),"onUpdate:value":a[2]||(a[2]=i=>C(o)?o.value=i:null),placeholder:"Description (optional)"},null,8,["value"])])]),_:1},8,["show"])],64)}}});export{ne as default};
