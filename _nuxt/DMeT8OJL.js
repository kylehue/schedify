import{u as D,N as z,G as A,I as F}from"./DYtgV5zr.js";import{d as q,a7 as R,a8 as P,a9 as k,o as v,aa as M,w as s,b as o,u as e,a3 as N,e as x,a4 as S,a as b,B as _,ac as I,ab as L,n as V,r as w,c as y,ae as G,af as j,F as E,ah as H}from"./CFlZcKar.js";import{_ as J,a as K,N as O,b as B}from"./C0aUKq12.js";import{u as Q}from"./C3-_pq4o.js";import"./BGJosmP3.js";const W={class:"flex flex-col md:flex-row md:items-center gap-1"},X={class:"flex flex-wrap justify-between"},Y={class:"flex flex-wrap gap-2"},Z=q({__name:"section",props:{code:{}},setup($){const c=$,f=D(),n=R(),i=P(),r=i.getSubject(n.params.subject);if(!r)throw k({statusCode:404,statusMessage:`Subject does not exist: ${n.params.subject}`});const a=i.getSection(r.code,c.code);if(!a)throw k({statusCode:404,statusMessage:`Section does not exist: ${c.code}`});function m(){V({params:{section:c.code},query:{s:n.query.s},name:"subjects-subject-sections-section-timeslots"})}function u(){f.warning({title:"Remove section",content:`Are you sure you want to remove ${c.code} from ${n.params.subject}?`,positiveText:"Remove",negativeText:"Cancel",onPositiveClick(C){i.removeSection(r.code,a.code)}})}return(C,d)=>(v(),M(e(L),{class:I([{"opacity-50":!e(a).isEnabled},"transition-opacity"])},{header:s(()=>[o(e(N),{class:"truncate text-sm"},{default:s(()=>[x(S(c.code),1)]),_:1})]),default:s(()=>[b("div",W,[o(e(N),{class:"truncate",depth:3},{default:s(()=>[x(S(e(a).description||"Empty description"),1)]),_:1})])]),action:s(()=>[b("div",X,[b("div",Y,[o(e(z),{dot:"",show:!e(i).isTimeslotsValid(e(r).code,e(a).code)},{default:s(()=>[o(e(_),{tertiary:"",onClick:m},{default:s(()=>d[1]||(d[1]=[x(" Edit time slots... ")])),_:1})]),_:1},8,["show"]),o(e(_),{onClick:d[0]||(d[0]=T=>e(a).isEnabled=!e(a).isEnabled),tertiary:""},{default:s(()=>[x(S(e(a).isEnabled?"Disable":"Enable"),1)]),_:1})]),o(e(_),{onClick:u,type:"error",quaternary:"",circle:""},{icon:s(()=>[o(e(A))]),_:1})])]),_:1},8,["class"]))}}),ee={class:"flex flex-wrap w-full justify-between gap-2"},te={class:"flex h-full justify-center"},se={key:1,class:"container flex flex-row flex-wrap h-fit pb-8"},oe={class:"flex flex-col gap-2"},re=q({__name:"index",setup($){Q({title:"Sections"});const c=D(),f=R(),n=w(!1),i=w(""),r=w(void 0),a=w(""),m=P(),u=m.getSubject(f.params.subject);if(!u)throw k({statusCode:404,statusMessage:`Subject does not exist: ${f.params.subject}`});function C(){let p=i.value.trim(),t=a.value.trim()||void 0;const g=()=>{m.addSection(u.code,p,t),i.value="",a.value="",n.value=!1,r.value=void 0};m.getSection(u.code,p)?c.warning({title:"Duplicate section",content:"This section already exists! Do you want to replace it instead?",negativeText:"Cancel",positiveText:"Replace",onPositiveClick(h){g()}}):p.length?g():r.value="error"}function d(){V({name:"subjects",query:{s:f.query.s}})}function T(){c.warning({title:"Clear all",content:`Are you sure you want to clear all sections in ${f.params.subject}?`,positiveText:"Clear all",negativeText:"Cancel",onPositiveClick(p){m.clearSections(u.code)}})}return(p,t)=>{const g=Z,h=J,U=K;return v(),y(E,null,[o(h,{name:"app",onBack:t[1]||(t[1]=()=>d()),breadcrumbs:[{label:"Subjects",click:()=>d()},{label:(p._.provides[G]||p.$route).params.subject}],title:"Sections"},{"header-extra":s(()=>[b("div",ee,[o(e(_),{class:"flex-1",onClick:t[0]||(t[0]=l=>n.value=!0)},{icon:s(()=>[o(e(F))]),default:s(()=>[t[5]||(t[5]=x(" Add a section "))]),_:1}),o(e(_),{class:"flex-1",onClick:T,tertiary:"",type:"error"},{icon:s(()=>[o(e(A))]),default:s(()=>[t[6]||(t[6]=x(" Clear all "))]),_:1})])]),default:s(()=>[b("div",te,[e(u).sections.size<=0?(v(),M(e(O),{key:0,class:"h-full w-full flex items-center justify-center"})):(v(),y("div",se,[(v(!0),y(E,null,H(e(u).sections.values(),l=>(v(),y("div",{key:l.code,class:"w-1/3 max-md:w-full max-xl:w-1/2 p-2"},[o(g,{code:l.code},null,8,["code"])]))),128))]))])]),_:1},8,["breadcrumbs"]),o(U,{show:e(n),"onUpdate:show":t[4]||(t[4]=l=>j(n)?n.value=l:null),title:"Add a section","positive-text":"Add","negative-text":"Nevermind",onPositiveClick:C},{default:s(()=>[b("div",oe,[o(e(B),{value:e(i),"onUpdate:value":t[2]||(t[2]=l=>j(i)?i.value=l:null),status:e(r),placeholder:"Code (must be unique)"},null,8,["value","status"]),o(e(B),{value:e(a),"onUpdate:value":t[3]||(t[3]=l=>j(a)?a.value=l:null),placeholder:"Description (optional)"},null,8,["value"])])]),_:1},8,["show"])],64)}}});export{re as default};
